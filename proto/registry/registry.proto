syntax = "proto3";

package registry.v1;

option go_package = "github.com/OpenBuilders/not-games-sdk-public/gen/grpc/go/registry";

import "common/rarity.proto";
import "common/pagination.proto";
import "common/tags.proto";

service RegistryService {
  rpc GetItemDef(GetItemDefRequest) returns (ItemDef) {}
  rpc CreateItemDef(CreateItemDefRequest) returns (CreateItemDefResponse) {}
  rpc UpdateItemDef(UpdateItemDefRequest) returns (UpdateItemDefResponse) {}
  rpc GetAchievementDef(GetAchievementDefRequest) returns (AchievementDef) {}
  rpc CreateAchievementDef(CreateAchievementDefRequest) returns (CreateAchievementDefResponse) {}
  rpc UpdateAchievementDef(UpdateAchievementDefRequest) returns (UpdateAchievementDefResponse) {}
  rpc ListItemDefs(ListItemDefsRequest) returns (ListItemDefsResponse) {}
  rpc ListAchievementsDefs(ListAchievementsDefsRequest) returns (ListAchievementsDefsResponse) {}
}

message ItemDef {
  string item_def_id = 1;
  int64 app_id = 2;
  string name = 3;
  string description = 4;
  string type = 5;
  string display_type = 6;
  string bundle = 7;
  string price = 8;
  string icon_url = 9;
  bool  marketable = 10;
  string tags = 11;
  string store_tags = 12;
  string store_images = 13;
  string app_files = 14;
  string collection = 15;
  bool hidden = 16;
  bool store_hidden = 17;
  bool game_only = 18;
  string promo = 19;
  bool tradable = 20;
  common.v1.Rarity rarity = 21;
  string exchange = 22;
  int64 supply = 23;
  optional int64 max_supply = 24;
  optional int64 issued = 25;
}

message UpdateItemDefRequest {
  string item_def_id = 1;
  int64 app_id = 2;
  optional string name = 3;
  optional string description = 4;
  optional string display_type = 5;
  optional string bundle = 6;
  optional string price = 7;
  optional string icon_url = 8;
  optional bool  marketable = 9;
  optional string store_tags = 10;
  optional string store_images = 11;
  optional string app_files = 12;
  optional string collection = 13;
  optional bool hidden = 14;
  optional bool store_hidden = 15;
  optional bool game_only = 16;
  optional string promo = 17;
  optional bool tradable = 18;
  optional string exchange = 19;
  optional int64 max_supply = 20;
  optional string tags = 21;
}

message AchievementDef {
  string achievement_def_id = 1;
  int64 app_id = 2;
  string name = 3;
  string description = 4;
  string icon_url = 5;
  string tags = 6;
  bool hidden = 7;
  string display_type = 8;
}

message GetItemDefRequest {
  string item_def_id = 1;
}

message CreateItemDefRequest {
  ItemDef item_def = 1;
}

message CreateItemDefResponse {
  string status = 1;
}

message UpdateItemDefResponse {
  string status = 1;
}

message GetAchievementDefRequest {
  string achievement_def_id = 1;
}

message CreateAchievementDefRequest {
  AchievementDef achievement_def = 1;
}

message CreateAchievementDefResponse {
  string status = 1;
}

message UpdateAchievementDefRequest {
  AchievementDef achievement_def = 1;
}

message UpdateAchievementDefResponse {
  string status = 1;
}

message ListItemDefsRequest {
  int32 limit = 1;
  int32 offset = 2;
  optional string collection = 3;
  optional string name = 4;
  optional common.v1.Rarity rarity = 5;
  optional string type = 6;
  optional string display_type = 7;
  optional string hidden = 8;
  optional string game_only = 9;
  optional string store_hidden = 10;
  optional string tradable = 11;
  optional int64 supply = 12;
  repeated string sort_fields = 13;
  repeated string directions = 14;
  optional common.v1.FilterTagList tags = 15;
  repeated string item_def_ids = 16;
}

message ListItemDefsResponse {
  repeated ItemDef items = 1;
  common.v1.Pagination pagination = 2;
}
message ListAchievementsDefsRequest {
  int32 limit = 1;
  int32 offset = 2;
}

message ListAchievementsDefsResponse {
  repeated AchievementDef items = 1;
  common.v1.Pagination pagination = 2;
}